<!DOCTYPE html>
<html>
  <head>
    <title>Knowledge management FAIRification tool for conservation and restoration processes</title>
    <link rel="icon" type="image/x-icon" href="pictures/CoffeeAndConservationLogo.png">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src = "js/d3.v7.js"></script>
    <script src = "js/hierarchyVisualizer.js"></script>
    <script src = "js/visualizationMethods.js"></script>
    <script src = "js/podReadAndWrite.js"></script>
    <script src = "js/commentify.js"></script>
    <script src = "js/rdflib/rdflib.min.js"></script>
  </head>
  <body>
    <header>
      <h1>Knowledge management FAIRification tool for conservation and restoration processes</h1>
      <hr>
    </header>
    <nav>
      <a href="index.html">Introduction</a>
      <a href="vocabulary.html">Vocabulary</a>
      <a href="ontology.html">Ontology</a>
      <a href="contact.html">Contact</a>
      <!-- create a form aligning to the right of the screen-->
      <div style="float: right;">
        <form id="userNameForm">
          <label id="userName" style="color: grey;">Anonymus</label>
          <br>
          <input id="userNameText" type="text">
          <button id="userNameButton" onclick=saveUserName()>Benutzer anmelden</button>
        </form>
      </div>
      <br>
      <center>
        <img src="pictures/CSV-Image.svg" alt="RRZEicons  CC BY-SA 3.0 Deed" height="150" title="RRZEicons  CC BY-SA 3.0 Deed" img>
        <img src="pictures/ThesaurusRex.webp" alt="Thesaurus Rex" height="150" title="Thesaurus Rex" img>
      </center>
    </nav>
    <main>
      <article> 
        <section>
          <h2>Hierarchical vocabulary validation and visualization</h2>
          <p>CSV/TSV-Datei validieren oder Beispieldatensatz verwenden.</p>
          <p>Eigene Dateien m√ºssen folgendem<a href="schema.html"> Tabellenschema </a>entsprechen.</p>
          <div id="output">
            <form id="fileForm">
              <input type="file" id="fileInput" accept=".tsv, .csv">
              <button type="submit">Datei laden</button>
          </form>
          <form id="textForm">
              <input type="text" id="textInput" value="https://docs.google.com/spreadsheets/d/e/2PACX-1vQCho2k88nLWrNSXj4Mgj_MwER5GQ9zbZ0OsO3X_QPa9s-3UkoeLLQHuNHoFMKqCFjWMMprKVHMZzOj/pub?gid=0&single=true&output=csv">
              <button type="submit">URL laden</button>
          </form>
            <br>
            <button onclick = readExample() id = "exampleButton" >Beispiel laden</button>
            <p id="ignored"> </p>
            <p id="topped"> </p>
            <p id="orphans"> </p>
            <p id="outputText"> </p>
            <p id="doublettes"> </p>
            <p id="missingParents"> </p>
            <p id="errorText"> </p>
            <p id="testingText"> </p>
            <!-- The Modal -->
            <div id="myModal" class="modal">
              <!-- Modal content -->
              <div class="modal-content">
                <div class="modal-header">
                  <span class="close">&times;</span>
                  <h2 id="header-head">Begriffsdetails</h2>
                </div>
                <div class="modal-body">
                </div>
                <div class="modal-footer">
                  <form id="commentForm">
                    <textarea id="commentText" rows="10" cols="150" style="resize: none;"></textarea>
                    <button type="submit" id="commentButton">Kommentieren</button>
                  </form>
                </div>
                <div class="modal-comments">
                </div>
              </div> 
            </div>
            <div id="chartDiv" style="width: 100%"> </div>
          </div>
        </section>
        <aside> </aside>
      </article>
      <script>
        var modal = document.getElementById("myModal");
        modal.style.display = "none";
        var span = document.getElementsByClassName("close")[0];
        span.onclick = function() {
          modal.style.display = "none";
        }
        const fileForm = document.getElementById('fileForm');
        fileForm.addEventListener('submit', inputFile);

        const textForm = document.getElementById('textForm');
        textForm.addEventListener('submit', inputUrl);

        const commentForm = document.getElementById("commentForm");
        commentForm.addEventListener("submit", updatePod)
        
        function inputFile() {
            event.preventDefault();
            const inputFile = document.getElementById('fileInput');
            const file = inputFile.files[0];
            let reader = new FileReader();
            reader.onload = function(e) {
              result = e.target.result;
              readData(result, "file")
            };
            reader.readAsText(file);
        }

        async function inputUrl() {
            event.preventDefault();
            const inputURL = document.getElementById('textInput').value;
            const response = await fetch(inputURL, {
                headers: { "content-type": "text/csv;charset=UTF-8" },
            });
            const text = await response.text();
            readData(text, "url")
        }

        function saveUserName() {
          event.preventDefault();
          var userNameText = document.getElementById("userNameText").value;
          document.getElementById("userName").innerHTML = userNameText;
          document.getElementById("userNameText").value = "";
        }

      </script>
    </main>
    <footer> </footer>
  </body>
</html>
